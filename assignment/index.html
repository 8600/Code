<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>assignment</title>
    <link rel="stylesheet" href="css/font-awesome.min.css">
</head>
<style>
    html,body,ul,li,ol,dl,dd,dt,p,h1,h2,h3,h4,h5,h6,form,fieldset,legend,img{margin:0;padding:0}
    img{border:none;}
    li {list-style-type:none;}
    body{
        height: 100%;
        width: 100%;
        font-family: arial, 宋体;
    }
    header{
        background: -ms-linear-gradient(left, #2b90c9,  #60d1f5);
        background:-moz-linear-gradient(left,#2b90c9,#60d1f5);
        background: -webkit-gradient(linear, 0% 0%, 0% 100%,from(#2b90c9), to(#60d1f5));
        background: -webkit-linear-gradient(left, #2b90c9, #60d1f5);
        background: -o-linear-gradient(left, #2b90c9, #60d1f5);
        height: 50px;
        line-height: 50px;
        color: white;
        overflow: hidden;
        min-width: 300px;
    }
    section{
        background-color:white;
        width:100%;
        overflow:auto;
        top:50px;
        position:absolute;
        z-index:10;
        bottom:0;
    }
    header .fa-angle-left{
        float: left;
        font-size: 200%;
        padding: 9px 15px;
        font-weight: bold;
    }
    header .switch{
        margin: 0 auto;
        width: 60%;
        height: 65%;
        position: relative;
        top: 13%;
        font-size: small;
        overflow: hidden;
        min-width: 233px;
        padding: 2px;
    }
    .switch .switch_member{
        width: 31%;
        height: 93%;
        float: left;
        text-align: center;
        line-height: 32px;
        border: 2px solid white;
    }
    .switch .switch_1{
        border-bottom-left-radius: 15px;
        border-top-left-radius: 15px;
    }
    .switch .switch_2{
        border-left: none;
        border-right: none;
    }
    .switch .switch_3{
        border-bottom-right-radius: 15px;
        border-top-right-radius: 15px;
    }
    .switch .is_active{
        color: #2694cd;
        background-color: white;
    }
    .box .card{
        height: 100%;
        width: 100%;
    }
    .box .i{
        position: absolute;
        float: left;
    }
    .box .item{
        height: 14%;
        border-bottom: 1px solid #ece9e9;
        position: relative;
        max-height: 100px;
        min-height: 80px;
        min-width: 95px;
    }
    .box .item .title{
        font-size: 120%;
        color: #595959;
        top: 27%;
        left: 20px;
        font-weight: 400;
    }
    .box .item .time{
        font-size: 100%;
        left: 20px;
        bottom: 17%;
        color: #aaaaaa;
    }
    .box .item .name{
        font-size: 77%;
        bottom: 3px;
        color: #aaaaaa;
        width: 70px;
        text-align: center;
        right: 0px;
    }
    .box .item .assign{
        font-size: 77%;
        bottom: 3px;
        right: 54px;
        color: #aaaaaa;
    }
    .box .item .user_img{
        top: 11%;
        right: 20px;
        width: 14%;
        height: 61%;
        border-radius: 6px;
        max-width: 60px;
        max-height: 60px;
    }
    .box .item .fa-sort-asc{
        font-size: 70%;
        font-weight: bold;
        color: red;
        margin-left: 5px;
    }
    .box .item .new{
        background-color: red;
        border-radius: 7px;
        color: white;
        font-size: 50%;
        margin-left: 8px;
        padding: 1px 2px;
        position: relative;
        bottom: 3px;
    }
    .lalalal{
        width: 100px;
        height:40px;
        background-color: blue;
        float: left;
    }
</style>
<body>
    <header>
        <nav class="fa fa-angle-left"></nav>
        <div class="switch">
            <div id="shoudao" class="switch_member btn btn-lg ripple switch_1 is_active">收到任务</div>
            <div id="zhipai" class="switch_member btn btn-lg ripple switch_2">指派任务</div>
            <div id="wancheng" class="switch_member btn btn-lg ripple switch_3">完成任务</div>
        </div>
    </header>
    <section class="box">
        <ul class="card"></ul>
    </section>
    <footer></footer>
    <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="js/vrv-jssdk-v1.3.js"></script>
    <script type="text/javascript" src="js/owo.js"></script>
    <script>
        var title;var time;var sendUserId;var userName=new Array();var msgID;var img=new Array();
        //**************************************测试用的数据**************************************
        //列表数据
        var moni="[TaskMsgBean { targetID = 4328629842, fromID = 4328626306, sendTime = 1479112095444, body = '{'body':'vjjjnb头像','msgBodyType':0}', msgID = 1279103, properties = TaskMsgPropertiesBean { timeZone = 32, timeTask = 201611141628172, isFinish = 0, isTask = 1, isRead = }, relateUsers = [], top = 0 }, TaskMsgBean { targetID = 4328629842, fromID = 4328626306, sendTime = 1479112255331, body = '{'body':'测试1','msgBodyType':0}', msgID = 1279144, properties = TaskMsgPropertiesBean { timeZone = 32, timeTask = 201611141630569, isFinish = 0, isTask = 1, isRead = }, relateUsers = [], top = 0 } ]";
        //-------------------------------切换列表事件-------------------------------
        function tabClick(name) {
            title =owo.text.cutStringArray(moni,"body\':\'","\',");
            time = owo.text.cutStringArray(moni,"sendTime = ",",");
            sendUserId = owo.text.cutStringArray(moni,"fromID = ",",");
            msgID = owo.text.cutStringArray(moni,"msgID = ",",");
            for(var i =0;i<title.length;i++){
                //模拟使用getUserProfile(name[i])获得用户头像，用户名数据
                userName[i] = "测试";
                img[i] = "http://myweb-10017157.cos.myqcloud.com/2016/20161115/eg_tulip.png";
                $(".card").append('<li class="item" ID='+i+' onclick="itemClick(this)"> <span class="i title">'+title[i]+'</span> <span class="i time fa fa-clock-o ">'+owo.time.getLocalTime2(time[i])+'</span> <span class="i name">'+userName[i]+'</span> <span class="i assign">指派人:</span> <img class="i user_img" src="'+img[i]+'"> </li>');
            }
        }
        //------------------------------DOM加载完毕事件------------------------------
        $(function () {
            //任务切换
            $(".switch_member").click(function(){
                var click =this;
                $(".switch_member").removeClass("is_active");
                $(click).addClass("is_active");
                tabClick(this.id);
            });
            //首页面加载 收到任务 列表
            tabClick("shoudao");
        });
        //------------------------------项目列表点击事件------------------------------
        function itemClick(dom) {
            var id =dom.getAttribute("ID");
            window.location.href="details.html?"+"title="+title[id]+"&time="+time[id]+"&name="+userName[id]+"&msgID="+msgID[id]+"&img="+img[id];
        }
        //----------------------------------VRVSDK----------------------------------
        vrv.init({debug:false});
        function getReceiveTask() {
            vrv.jssdk.getReceiveTask({
                success: function (res) {
                    document.write(res);
                }
            })
        }
        function getAppointedTask() {
            vrv.jssdk.getAppointedTask({
                success: function (res) {
                    document.write(res);
                }
            })
        }
        function getCompletedTask() {
            vrv.jssdk.getReceiveTask({
                success: function (res) {
                    document.write(res);
                }
            })
        }
        //获得用户头像,名称信息
        function getUserProfile(userID) {
            vrv.jssdk.getReceiveTask({
                userID:userID,
                success: function (res) {
                    return res;
                }
            })
        }
        //----------------------------------VRVSDK----------------------------------
    </script>
</body>
</html>